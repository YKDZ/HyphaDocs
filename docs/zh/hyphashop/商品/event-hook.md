# 事件钩子

你可以用商品事件钩子在商品被处理的特定阶段插入自定义操作，抑或是控制处理的结果。

## 交易钩子

| 名称                         | 配置键     | 解释                                                                                                                                                                                                     |
|------------------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 给予玩家时                   | `on-give`  | 玩家从商店购买商品，交易的所有提前检查（玩家余额、商品库存等等）都完成后执行**一次**，购买份数通过 `stack` 变量传递                                                                                           |
| 从玩家处收取时               | `on-take`  | 商店从玩家处收购商品，交易的所有提前检查（商店余额等等）都完成后执行**一次**，收购份数通过 `stack` 变量传递                                                                                                  |
| 匹配一个物品是否与商品相同时 | `on-match` | 在判断玩家背包剩余空间、判断玩家背包内是否有足够的物品可供收购等过程中，逐个检查玩家背包内的物品是否与商品匹配时调用。只要有一个动作的返回值为 `false`，即认为该物品与商品不匹配。只有物品类商品会触发此钩子。 |

## 上架钩子

| 名称   | 配置键           | 解释                                                                                                       |
|--------|------------------|------------------------------------------------------------------------------------------------------------|
| 上架前 | `on-before-list` | 商品在上架过程中已被选中、准备正式上架前执行该钩子中的动作。只要有一个动作的最终值是 `false`，上架就会被取消。 |
| 上架后 | `on-after-list`  | 商品已经完成上架后执行该钩子中的动作，返回值没有任何影响。                                                   |
